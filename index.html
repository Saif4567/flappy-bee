<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Flappy Bee</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
        font-family: Arial, sans-serif;
    }

    #shareBtn {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #1DA1F2;
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        display: none;
        font-size: 18px;
        cursor: pointer;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="shareBtn">Share Score on X</div>

<script>
// LOAD BACKGROUND TILE
const bgTile = new Image();
bgTile.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAIAAAAP3aGbAABIVUlEQVR4nO29W4x..."; // your image embedded

// CANVAS SETUP
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// GAME STATE
let gameStarted = false;
let gameOver = false;

// SCORE
let score = 0;

// BACKGROUND SCROLL
let bgX = 0;

// BEE
let bee = {
    x: 120,
    y: canvas.height / 2,
    size: 22,
    velocity: 0,
    gravity: 0.45,
    jump: -8
};

// PIPES ARRAY
let pipes = [];
let pipeGap = 160;
let pipeWidth = 70;

// SOUNDS
const flapSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_a6bbc71c66.mp3");
const pointSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_1e44b81e9f.mp3");
const dieSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_4a8df21f69.mp3");

// CREATE PIPE EVERY 2 SEC
function createPipe() {
    if (!gameStarted || gameOver) return;
    let top = Math.random() * (canvas.height - pipeGap - 100) + 50;

    pipes.push({
        x: canvas.width,
        topHeight: top,
        bottomY: top + pipeGap,
        counted: false
    });
}
setInterval(createPipe, 2000);

// CONTROLS
function flap() {
    if (!gameStarted) {
        gameStarted = true;
        return;
    }
    if (gameOver) return;
    bee.velocity = bee.jump;
    flapSound.play();
}
document.addEventListener("keydown", flap);
document.addEventListener("touchstart", flap);

// DRAW BACKGROUND (TILED)
function drawBackground() {
    let tileWidth = 200;
    for (let x = bgX; x < canvas.width + tileWidth; x += tileWidth) {
        ctx.drawImage(bgTile, x, 0, tileWidth, canvas.height);
    }
    bgX -= 1.5;
    if (bgX <= -200) bgX = 0;
}

// DRAW BEE
function drawBee() {
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.arc(bee.x, bee.y, bee.size, 0, Math.PI * 2);
    ctx.fill();

    // stripes
    ctx.fillStyle = "black";
    ctx.fillRect(bee.x - 10, bee.y - 10, 5, 20);
    ctx.fillRect(bee.x + 5, bee.y - 10, 5, 20);
}

// GAME LOOP
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawBackground();

    if (!gameStarted) {
        ctx.fillStyle = "white";
        ctx.font = "40px Arial";
        ctx.fillText("Tap to Start üêù", canvas.width / 2 - 120, canvas.height / 2);
        requestAnimationFrame(gameLoop);
        return;
    }

    // Bee physics
    bee.velocity += bee.gravity;
    bee.y += bee.velocity;
    drawBee();

    // Pipes
    ctx.fillStyle = "#ffb6c1";
    pipes.forEach(pipe => {
        pipe.x -= 3;

        ctx.fillRect(pipe.x, 0, pipeWidth, pipe.topHeight);
        ctx.fillRect(pipe.x, pipe.bottomY, pipeWidth, canvas.height - pipe.bottomY);

        // Score
        if (!pipe.counted && pipe.x + pipeWidth < bee.x) {
            score++;
            pipe.counted = true;
            pointSound.play();
        }

        // Collision detection
        if (
            bee.x + bee.size > pipe.x &&
            bee.x - bee.size < pipe.x + pipeWidth &&
            (bee.y - bee.size < pipe.topHeight || bee.y + bee.size > pipe.bottomY)
        ) {
            endGame();
        }
    });

    // Ground / ceiling
    if (bee.y + bee.size >= canvas.height || bee.y - bee.size <= 0) {
        endGame();
    }

    // Draw Score
    ctx.fillStyle = "white";
    ctx.font = "35px Arial";
    ctx.fillText("Score: " + score, 20, 50);

    if (!gameOver) requestAnimationFrame(gameLoop);
}
gameLoop();

// END GAME
function endGame() {
    if (gameOver) return;
    gameOver = true;
    dieSound.play();

    document.getElementById("shareBtn").style.display = "block";

    ctx.fillStyle = "white";
    ctx.font = "50px Arial";
    ctx.fillText("Game Over!", canvas.width / 2 - 140, canvas.height / 2);

    setTimeout(() => location.reload(), 2500);
}

// SHARE BUTTON
document.getElementById("shareBtn").onclick = () => {
    const url = encodeURIComponent(window.location.href);
    const msg = encodeURIComponent(`I scored ${score} in Flappy Bee! üêùüî•`);
    window.open(`https://twitter.com/intent/tweet?text=${msg}&url=${url}`, "_blank");
};
</script>

</body>
</html>